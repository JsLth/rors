<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>OpenRouteService instance — ors_instance • rors</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="OpenRouteService instance — ors_instance"><meta name="description" content="Creates an OpenRouteService instance object. An instance
represents either a local/remote server or a directory from which
OpenRouteService can be set up. Running this function or any of the related
functions listed below stores the instance in an internal environment
and enables functions interacting with the OpenRouteService API to
automatically detect the appropriate server information needed to make a
successful request. Hence, this function should always be run after
loading rors as a means of fixing an instance to the current
session.
While initializing an instance using an already running server requires no
further action, this function family excels at building a local
OpenRouteService server from source. Setting up a local server effectively
removes any server-side rate limits and allows you to conveniently use the
package functions on much larger datasets. For setting up a local server,
it is required to build and start a Docker container.
To do this, ors_instance
starts Docker (if necessary), creates an ORS directory, parses all
important information and jumpstarts a fresh ORS server.
For a full reference of the methods of an ORS instance, refer to
ORSLocal and ORSRemote."><meta property="og:description" content="Creates an OpenRouteService instance object. An instance
represents either a local/remote server or a directory from which
OpenRouteService can be set up. Running this function or any of the related
functions listed below stores the instance in an internal environment
and enables functions interacting with the OpenRouteService API to
automatically detect the appropriate server information needed to make a
successful request. Hence, this function should always be run after
loading rors as a means of fixing an instance to the current
session.
While initializing an instance using an already running server requires no
further action, this function family excels at building a local
OpenRouteService server from source. Setting up a local server effectively
removes any server-side rate limits and allows you to conveniently use the
package functions on much larger datasets. For setting up a local server,
it is required to build and start a Docker container.
To do this, ors_instance
starts Docker (if necessary), creates an ORS directory, parses all
important information and jumpstarts a fresh ORS server.
For a full reference of the methods of an ORS instance, refer to
ORSLocal and ORSRemote."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rors</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.9.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Overview</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-book"></span> Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/ors-installation.html">OpenRouteService setup</a></li>
    <li><a class="dropdown-item" href="../articles/ors-routing.html">Routing functions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-search"></span> Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JsLth/rors/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>OpenRouteService instance</h1>
      <small class="dont-index">Source: <a href="https://github.com/JsLth/rors/blob/master/R/instance.R" class="external-link"><code>R/instance.R</code></a></small>
      <div class="d-none name"><code>ors_instance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates an OpenRouteService instance object. An instance
represents either a local/remote server or a directory from which
OpenRouteService can be set up. Running this function or any of the related
functions listed below stores the instance in an internal environment
and enables functions interacting with the OpenRouteService API to
automatically detect the appropriate server information needed to make a
successful request. Hence, this function should always be run after
loading <code>rors</code> as a means of fixing an instance to the current
session.</p>
<p>While initializing an instance using an already running server requires no
further action, this function family excels at building a local
OpenRouteService server from source. Setting up a local server effectively
removes any server-side rate limits and allows you to conveniently use the
package functions on much larger datasets. For setting up a local server,
it is required to build and start a Docker container.
To do this, <code>ors_instance</code>
starts Docker (if necessary), creates an ORS directory, parses all
important information and jumpstarts a fresh ORS server.</p>
<p>For a full reference of the methods of an ORS instance, refer to
<code><a href="ORSLocal.html">ORSLocal</a></code> and <code><a href="ORSRemote.html">ORSRemote</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ors_instance</span><span class="op">(</span>dir <span class="op">=</span> <span class="st">"."</span>, server <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"docker"</span>, <span class="st">"jar"</span>, <span class="st">"war"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p><code>[character]</code></p>
<p>Custom OpenRouteService directory. If not specified, the directory
will be downloaded to the working direcotry. If a directory called
<code>"openrouteservice-{version}"</code> is present, the download will be skipped
unless overwrite is <code>TRUE</code>.
Ignored if <code>server</code> is given.</p></dd>


<dt id="arg-server">server<a class="anchor" aria-label="anchor" href="#arg-server"></a></dt>
<dd><p><code>[character]</code></p>
<p>URL of a server that accepts OpenRouteService requests. This can be a URL
to a local or a remote server. The official public API can be accessed using
the shortcuts <code>"public"</code> or <code>"pub"</code>. Keep in mind that the public
API is rate-restricted and requests are automatically throttled to 40
requests per minute. Routing functions <em>will</em> be slow for larger
datasets.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>[character]</code></p>
<p>The type of application to set up. Can be one of <code>"docker"</code> (default),
<code>"jar"</code>, or <code>"war"</code>. Docker instances are the most versatile but
also the most complex. Docker instances require Docker to be installed and
accessible (relevant for Linux users). JAR instances require JDK &gt;= 17 to
be installed. WAR instances require Tomcat 10 to be installed. JAR
instances are controlled using an external process and are thus
bound to the R session. If the session dies, so do the OpenRouteService
servers. Docker containers, conversely, are not bound to the R session.
When using Docker Desktop (on Windows) and starting the Docker daemon from
R, the software closes when R dies. This stops ORS containers but does not
kill them.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to <code><a href="ORSLocal.html">ORSLocal</a></code> or
<code><a href="ORSRemote.html">ORSRemote</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>R6 object of class <code>ors_instance</code> as created by
<code><a href="ORSLocal.html">ORSLocal</a></code> or <code><a href="ORSRemote.html">ORSRemote</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="session-mounting">Session mounting<a class="anchor" aria-label="anchor" href="#session-mounting"></a></h2>



<p>Upon initialization (or whenever calling a method) the object created by
<code>ors_instance</code> mounts itself to the current R session.
<code>ors_*</code> functions automatically identify the mounted ORS instance to
retrieve important information for querying ORS servers or processing other
data. Mounted instances are cleared when starting a new session or
when overwriting with a new instance.</p>
<p>In case multiple instances are running simultaneously and should be queried
in the same instance, <code>ors_*</code> functions allow to directly pass an
<code>instance</code> object. Otherwise, it is recommended to implicitly use
the mounted instance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Download and furnish an ORS instance</span></span></span>
<span class="r-in"><span><span class="co"># To execute this code, docker is required to be running</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">ors_instance</span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, version <span class="op">=</span> <span class="st">"8.0.0"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Docker version 26.1.3, build b72abbb</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Downloading docker-compose.yml</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Using OpenRouteService version <span style="color: #00BB00;">v8.0.0</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Downloaded docker-compose.yml <span style="color: #B2B2B2;">[527ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ORSInstance&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  server : http://localhost:8080/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  type   : local (docker)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  active : TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  init   : FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Connect to the public API</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>ORS_TOKEN <span class="op">=</span> <span class="st">"xxx"</span><span class="op">)</span> <span class="co"># a token must be set</span></span></span>
<span class="r-in"><span><span class="fu">ors_instance</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"public"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ORSInstance&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  server : https://api.openrouteservice.org/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  type   : remote </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  active : TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Connect to a local server</span></span></span>
<span class="r-in"><span><span class="co"># Initializing an instance by passing the URL to a local server</span></span></span>
<span class="r-in"><span><span class="co"># does not allow for control of the underlying data and</span></span></span>
<span class="r-in"><span><span class="co"># configurations. If finer control over such things is needed,</span></span></span>
<span class="r-in"><span><span class="co"># it is necessary to set up the instance from scratch using the</span></span></span>
<span class="r-in"><span><span class="co"># `dir` argument.</span></span></span>
<span class="r-in"><span><span class="fu">ors_instance</span><span class="op">(</span>server <span class="op">=</span> <span class="st">"https://127.0.0.1:8001/"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ORSInstance&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  server : https://127.0.0.1:8001/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  type   : remote </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  active : TRUE</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonas Lieth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

