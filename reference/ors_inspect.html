<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Route inspection — ors_inspect • rors</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Route inspection — ors_inspect"><meta name="description" content="Calls the directions service once to get a closer look at route
characteristics and attributes. Produces a dataframe containing an elaborate
perspective on route sections and their contextual properties.
ors_inspect can also be used as a relatively low-level interface to
the directions service with the ability to return responses as parsed or
unparsed JSONs.
The summary function computes summary statistics and interval tables for
a given route."><meta property="og:description" content="Calls the directions service once to get a closer look at route
characteristics and attributes. Produces a dataframe containing an elaborate
perspective on route sections and their contextual properties.
ors_inspect can also be used as a relatively low-level interface to
the directions service with the ability to return responses as parsed or
unparsed JSONs.
The summary function computes summary statistics and interval tables for
a given route."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rors</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.9.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Overview</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-book"></span> Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/ors-installation.html">OpenRouteService setup</a></li>
    <li><a class="dropdown-item" href="../articles/ors-routing.html">Routing functions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-search"></span> Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JsLth/rors/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Route inspection</h1>
      <small class="dont-index">Source: <a href="https://github.com/JsLth/rors/blob/master/R/inspect.R" class="external-link"><code>R/inspect.R</code></a></small>
      <div class="d-none name"><code>ors_inspect.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calls the directions service once to get a closer look at route
characteristics and attributes. Produces a dataframe containing an elaborate
perspective on route sections and their contextual properties.
<code>ors_inspect</code> can also be used as a relatively low-level interface to
the directions service with the ability to return responses as parsed or
unparsed JSONs.</p>
<p>The summary function computes summary statistics and interval tables for
a given route.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ors_inspect</span><span class="op">(</span></span>
<span>  <span class="va">src</span>,</span>
<span>  profile <span class="op">=</span> <span class="fu"><a href="get_instance.html">get_profiles</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"waypoint"</span>, <span class="st">"step"</span>, <span class="st">"segment"</span><span class="op">)</span>,</span>
<span>  attributes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  elevation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  navigation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  alternative_routes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  round_trip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tidy"</span>, <span class="st">"list"</span>, <span class="st">"string"</span><span class="op">)</span>,</span>
<span>  elev_as_z <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  instance <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  params <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ors_route'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-src">src<a class="anchor" aria-label="anchor" href="#arg-src"></a></dt>
<dd><p><code>[sf]</code></p>
<p>Source dataset containing at least two point geometries for which routes are
to be computed. If <code>round_trip</code> is specified, <code>source</code> must contain
a single coordinate pair from which a round trip is generated.</p></dd>


<dt id="arg-profile">profile<a class="anchor" aria-label="anchor" href="#arg-profile"></a></dt>
<dd><p><code>[character]</code></p>
<p>Means of transport as supported by OpenRouteService.
Defaults to the first profile in a call to <code><a href="get_instance.html">get_profiles</a></code>.
For <code>ors_shortest_distances</code>, <code>profile</code> can be a character
vector, for all other functions it needs to be a character scalar.
For details on all profiles, refer to the
<a href="https://giscience.github.io/openrouteservice/documentation/Tag-Filtering.html" class="external-link">documentation</a>.</p></dd>


<dt id="arg-level">level<a class="anchor" aria-label="anchor" href="#arg-level"></a></dt>
<dd><p><code>[character]</code></p>
<p>Level of route aggregation. Must be one of <code>waypoint</code>, <code>step</code> or
<code>segment</code>. See details.</p></dd>


<dt id="arg-attributes">attributes<a class="anchor" aria-label="anchor" href="#arg-attributes"></a></dt>
<dd><p><code>[list]</code></p>
<p>List of attributes that summarize route characteristics.
This includes three values: <code>avgspeed</code> states the average vehicle speed
along the route, <code>detourfactor</code> indicates how much the route deviates
from a straight line. <code>percentage</code> shows the share of a segment compared
to the entire route. If <code>TRUE</code>, all values are included.</p></dd>


<dt id="arg-extra-info">extra_info<a class="anchor" aria-label="anchor" href="#arg-extra-info"></a></dt>
<dd><p><code>[character]</code>/<code>[TRUE]</code></p>
<p>List of keywords that add extra information regarding each
linestring segment of the output. If <code>TRUE</code>, all values are included.
See details for more information.</p></dd>


<dt id="arg-elevation">elevation<a class="anchor" aria-label="anchor" href="#arg-elevation"></a></dt>
<dd><p><code>[logical]</code></p>
<p>If <code>TRUE</code>, elevation data is included in the output.</p></dd>


<dt id="arg-navigation">navigation<a class="anchor" aria-label="anchor" href="#arg-navigation"></a></dt>
<dd><p><code>[logical]</code></p>
<p>If <code>TRUE</code>, navigation information is included in the output, i.e.,
instructions and road exits. If <code>level == "segment"</code>, navigation data
is dropped from the output.</p></dd>


<dt id="arg-alternative-routes">alternative_routes<a class="anchor" aria-label="anchor" href="#arg-alternative-routes"></a></dt>
<dd><p><code>[list]</code></p>
<p>Named list that specifies options for alternative routes and accepts up to
three parameters. <code>target_count</code> is the maximum number of routes to
compute (including the recommended route). Must be an integer between 1 and 3
and defaults to 1. The output can contain less routes than specified if no
other alternatives can be computed from the <code>src</code> coordinates.
<code>share_factor</code> denotes the maximum share of identical paths between
routes. <code>weight_factor</code> is the maximum factor that a route can deviate
(i.e. be longer) from the original route. If specified, and
<code>target_count</code> is larger than 1, the output is wrapped in a list of up
to three dataframes. If <code>NULL</code>, no alternative routes are computed.</p></dd>


<dt id="arg-round-trip">round_trip<a class="anchor" aria-label="anchor" href="#arg-round-trip"></a></dt>
<dd><p><code>[list]</code></p>
<p>Named list that specifies options for round trips and accepts up to three
parameters. <code>length</code> is the approximate length of the round trip.
<code>points</code> denotes the number of route points from which to derive a
round trip (the higher the rounder). <code>seed</code> controls the randomisation
of the route direction. If specified, <code>src</code> must contain a single
coordinate pair from which a round trip is to be generated. If <code>NULL</code>,
no round trip is computed.</p></dd>


<dt id="arg-as">as<a class="anchor" aria-label="anchor" href="#arg-as"></a></dt>
<dd><p><code>[character]</code></p>
<p>How to format the output. If <code>"string"</code>, returns the entire JSON
response string. If <code>"list"</code>, returns a parsed JSON list. If
<code>"tidy"</code>, performs lots of data preparation to shape the response into a
tibble.</p></dd>


<dt id="arg-elev-as-z">elev_as_z<a class="anchor" aria-label="anchor" href="#arg-elev-as-z"></a></dt>
<dd><p><code>[logical]</code></p>
<p>If <code>TRUE</code>, elevation data is stored as z-values in the
geometry of the output <code>sf</code> dataframe. If <code>FALSE</code>, elevation is
stored as a distinct dataframe column. Ignored if <code>elevation = FALSE</code>.</p></dd>


<dt id="arg-instance">instance<a class="anchor" aria-label="anchor" href="#arg-instance"></a></dt>
<dd><p><code>[ors_instance]</code></p>
<p>Object of an OpenRouteService instance that should be used for route
computations. It is recommended to use <code><a href="ors_instance.html">ors_instance</a></code>
to set an instance globally. This argument should only be used if activating
an instance globally is not feasible.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the ORS API. Convenience way to
directly pass arguments of <code><a href="ors_params.html">ors_params</a></code>.</p></dd>


<dt id="arg-params">params<a class="anchor" aria-label="anchor" href="#arg-params"></a></dt>
<dd><p>List of additional arguments passed to the ORS API. See
<code><a href="ors_params.html">ors_params</a></code> for details.</p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A route object of class <code>ors_inspect</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an sf dataframe containing detailed sections of all routes
between the coordinates specified in <code>src</code>, aggregated according to
the level of aggregation stated in <code>level</code>. If <code>alternative_routes</code>
is specified, returns a list of sf dataframes instead with each element
containing a route alternative.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>OpenRouteService distinguishes between three
types of route aggregation: Segments, steps and waypoints. A segment is a
single route between <code>src[i, ]</code> and <code>src[i + 1, ]</code>. A step
is a route section as relevant for a navigation system. A waypoint is a
straight connection between two geographical points on a route.</p>
<p>Depending on the chosen level of aggregation, the output has to be adjusted
through interpolation and aggregation. For all levels below <code>"segment"</code>,
ORS attributes are stored as R attributes and are not included in the
dataframe. For <code>"waypoint"</code>, distances and durations are derived from the
geometry lengths and do not take into account elevation (due to restrictions
in the s2 package). Extra information (using the <code>extra_info</code> argument)
and street names do not perfectly overlap with steps and segments. In these
cases, the value with the highest overlap is adopted causing some information
loss. Navigation information is dropped on <code>"segment"</code> level.</p>
<p>Extra information can be requested as additional context for each waypoint on
a route. Possible values include:</p><dl><dt>steepness</dt>
<dd><p>Ordered factor describing how steep a part of a route is.</p></dd>

<dt>suitability</dt>
<dd><p>Ordinal numeric describing how suitable a part of a
route is (1 - unsuitable; 10 - suitable).</p></dd>

<dt>surface</dt>
<dd><p>Unordered factor describing the surface material covering a
part of a route.</p></dd>

<dt>waycategory</dt>
<dd><p>Unordered factor describing special parts of a route.</p></dd>

<dt>waytype</dt>
<dd><p>Unordered factor containing different types of roads.</p></dd>

<dt>tollways</dt>
<dd><p>For <code>driving-*</code> profiles, specifies whether a part of a
route is a tollway.</p></dd>

<dt>traildifficulty</dt>
<dd><p>For walking and driving profiles, specifies the OSM
trail difficulty.</p></dd>

<dt>osmid</dt>
<dd><p>For the wheelchair profile, contains the OSM IDs of used ways.</p></dd>

<dt>roadaccessrestrictions</dt>
<dd><p>Unordered factor describing road access
restriction.</p></dd>

<dt>countryinfo</dt>
<dd><p>Nominal numeric containing country codes of a part of a
route.</p></dd>

<dt>green</dt>
<dd><p>For walking profiles, describes the amount of green on a route
(1 - little; 10 - much).</p></dd>

<dt>noise</dt>
<dd><p>For walking profiles, describes the amount of noise on a route
(1 - little; 10 - much).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ors_pairwise.html">ors_pairwise</a></code>,
<code><a href="plot_section.html">plot_section</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">sample_source</span> <span class="op">&lt;-</span> <span class="fu"><a href="ors_sample.html">ors_sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sample_dest</span> <span class="op">&lt;-</span> <span class="fu"><a href="ors_sample.html">ors_sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">profile</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_instance.html">get_profiles</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic inspection without extra information</span></span></span>
<span class="r-in"><span><span class="va">insp</span> <span class="op">&lt;-</span> <span class="fu">ors_inspect</span><span class="op">(</span><span class="va">sample_source</span>, <span class="va">sample_dest</span>, <span class="va">profile</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Advanced inspection with extra information</span></span></span>
<span class="r-in"><span><span class="va">insp_adv</span> <span class="op">&lt;-</span> <span class="fu">ors_inspect</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">sample_source</span>,</span></span>
<span class="r-in"><span>  <span class="va">sample_dest</span>,</span></span>
<span class="r-in"><span>  <span class="va">profile</span>,</span></span>
<span class="r-in"><span>  extra_info <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Inspection of route elevation data</span></span></span>
<span class="r-in"><span><span class="va">insp_elev</span> <span class="op">&lt;-</span> <span class="fu">ors_inspect</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">sample_source</span>,</span></span>
<span class="r-in"><span>  <span class="va">sample_dest</span>,</span></span>
<span class="r-in"><span>  <span class="va">profile</span>,</span></span>
<span class="r-in"><span>  elevation <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  elev_as_z <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Inspection of route summary attributes</span></span></span>
<span class="r-in"><span><span class="va">insp_attr</span> <span class="op">&lt;-</span> <span class="fu">ors_inspect</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">sample_source</span>,</span></span>
<span class="r-in"><span>  <span class="va">sample_dest</span>,</span></span>
<span class="r-in"><span>  <span class="va">profile</span>,</span></span>
<span class="r-in"><span>  attributes <span class="op">=</span> <span class="st">"detourfactor"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">insp_attr</span>, <span class="st">"detourfactor"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Altering the route by passing further arguments</span></span></span>
<span class="r-in"><span><span class="va">insp_opts</span> <span class="op">&lt;-</span> <span class="fu">ors_inspect</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">sample_source</span>,</span></span>
<span class="r-in"><span>  <span class="va">sample_dest</span>,</span></span>
<span class="r-in"><span>  <span class="va">profile</span>,</span></span>
<span class="r-in"><span>  continue_straight <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  preference <span class="op">=</span> <span class="st">"shortest"</span>,</span></span>
<span class="r-in"><span>  maximum_speed <span class="op">=</span> <span class="fl">80</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summarizing route specifics</span></span></span>
<span class="r-in"><span><span class="va">route_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">insp_adv</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonas Lieth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

